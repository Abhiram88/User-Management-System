<%- include('include/_header') %>


<html>
 
<head>
    <title>My wall</title>
     
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel='stylesheet' href="css/style.css">

</head>

<body onload="getPosts('<%= userid %>')">

    <div class="container-fluid">
        <div class="row">
            <br>
        </div>
        <div class="row">
            <div class="col-md-3 entertainment">
                <h2>HTML</h2>
                <p>HTML is the standard markup language for describing the structure of the web pages. Our HTML tutorials will help you to understand the basics of latest HTML5 language, so that you can create your own web pages or website.</p>
                <p><a href="https://www.tutorialrepublic.com/html-tutorial/" target="_blank" class="btn btn-success">Learn More &raquo;</a></p>
            </div>
            <div class="col-md-6 userwall">
                <form action="http://localhost:4000/createpost", method="POST", id="createpost">
                    <label for="createpost"><i>Share your thoughts:</i></label>
                    <input type = 'hidden' name="id" value="<%= userid %>">
                    <textarea class="form-control" rows="5" id="createpost" name="post"></textarea>
                    <button type="submit" class="btn btn-success postbutton">Post</button>
                </form>
            </div>
            <div class="col-md-3 userfriends">
                <h2>Bootstrap</h2>
                <p>Bootstrap is a powerful front-end framework for faster and easier web development. Our Bootstrap tutorials will help you to learn all the features of latest Bootstrap 4 framework so that you can easily create responsive websites.</p>
                <p><a href="https://www.tutorialrepublic.com/twitter-bootstrap-tutorial/" target="_blank" class="btn btn-success">Learn More &raquo;</a></p>
            </div>
            <br><br>

            

            <div class="container-fluid posts_data" id="post_blog">
                <h4><i>posts</i></h4>
                <ul id="posts"></ul><br>
            </div>
    </div>

   
<script>

async function getPosts(userid){
    console.log("hellop")
    var id = userid;

    console.log(id);

    fetch(`http://localhost:4000/getposts?userid=${id}`)
    .then(res => res.json())
    .then(data => {
        var postTag = document.querySelector('#posts');
    
        for(var i=0; i<data.length; i++){
            var pTag = document.createElement("p");
            pTag.innerHTML = data[i]['post'];
            postTag.appendChild(pTag);
        }
    })
    .catch(err => {
        console.log(err);
    })
}

  
</script>

</body>
</html>